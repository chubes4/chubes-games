(()=>{"use strict";const e=window.React,t=window.wp.blocks,r=window.wp.blockEditor,s=window.wp.i18n,n=window.wp.element,a=window.wp.components,i=JSON.parse('{"UU":"chubes-games/ai-adventure-step"}');(0,t.registerBlockType)(i.UU,{edit:({attributes:t,setAttributes:i,clientId:o})=>{const{stepPrompt:c,stepId:l,triggers:g}=t;(0,n.useEffect)(()=>{l||i({stepId:o})},[o]);const p=(e,t,r)=>{const s=[...g];s[t][r]=e,i({triggers:s})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,s.__)("Triggers","chubes-games")},g.map((t,r)=>(0,e.createElement)("div",{key:r,className:"trigger-item"},(0,e.createElement)(a.TextControl,{label:(0,s.__)("Trigger Phrase","chubes-games"),value:t.triggerPhrase,onChange:e=>p(e,r,"triggerPhrase"),placeholder:"e.g., Player opens the chest"}),(0,e.createElement)(a.TextControl,{label:(0,s.__)("Destination Step ID","chubes-games"),value:t.destinationStep,onChange:e=>p(e,r,"destinationStep"),placeholder:"Enter step ID or 'end_game'"}),(0,e.createElement)(a.Button,{isLink:!0,isDestructive:!0,onClick:()=>(e=>{const t=[...g];t.splice(e,1),i({triggers:t})})(r)},(0,s.__)("Remove Trigger","chubes-games")))),(0,e.createElement)(a.Button,{variant:"primary",onClick:()=>{const e=[...g,{triggerPhrase:"",destinationStep:""}];i({triggers:e})}},(0,s.__)("Add Trigger","chubes-games")))),(0,e.createElement)("div",{...(0,r.useBlockProps)()},(0,e.createElement)(r.RichText,{tagName:"p",onChange:e=>i({stepPrompt:e}),value:c,placeholder:(0,s.__)('Step Prompt: e.g., "A treasure chest sits in the center of the room."',"chubes-games")})))},save:()=>null})})();