(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.blockEditor,a=window.wp.components,r=window.wp.i18n,s=window.wp.data,l=window.wp.element,o=JSON.parse('{"UU":"chubes-games/ai-adventure"}'),c=e=>e&&Array.isArray(e)?e.map(e=>({name:e.name,attributes:e.attributes,innerBlocks:c(e.innerBlocks)})):[];(0,t.registerBlockType)(o.UU,{edit:({attributes:t,setAttributes:o,clientId:i})=>{const m=(0,n.useBlockProps)({className:"chubes-game-window"}),{title:u,adventurePrompt:d,gameMasterPersona:h}=t,p=(0,s.useSelect)(e=>e("core/block-editor").getBlocksByClientId(i)[0]?.innerBlocks,[i]);return(0,l.useEffect)(()=>{const e=JSON.stringify(c(p));e!==t.innerBlocksJSON&&o({innerBlocksJSON:e})},[p,t.innerBlocksJSON,o]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,r.__)("AI Settings","chubes-games")},(0,e.createElement)(a.TextareaControl,{label:(0,r.__)("Game Master Persona","chubes-games"),value:h,onChange:e=>o({gameMasterPersona:e}),help:(0,r.__)("Define the personality and role of the AI storyteller.","chubes-games")}))),(0,e.createElement)("div",{...m},(0,e.createElement)(n.RichText,{tagName:"h2",className:"adventure-title",onChange:e=>o({title:e}),value:u,placeholder:(0,r.__)("Enter Adventure Title","chubes-games")}),(0,e.createElement)(n.RichText,{tagName:"p",className:"adventure-prompt",onChange:e=>o({adventurePrompt:e}),value:d,placeholder:(0,r.__)("Adventure Description: Describe the overall plot in 2-3 sentences. This will be shown to the player before they start.","chubes-games")}),(0,e.createElement)(n.InnerBlocks,{allowedBlocks:["chubes-games/ai-adventure-path"]})))},save:({attributes:t})=>(0,e.createElement)(n.InnerBlocks.Content,null)})})();